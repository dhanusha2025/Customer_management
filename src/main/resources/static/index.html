<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--  <title>Customer CRUD</title>-->
<!--  <script>-->
<!--    async function fetchCustomers() {-->
<!--      const response = await fetch('/api/customers');-->
<!--      const customers = await response.json();-->
<!--      const tableBody = document.getElementById('customerTableBody');-->
<!--      tableBody.innerHTML = '';-->
<!--      customers.forEach(customer => {-->
<!--        const row = `<tr>-->
<!--          <td>${customer.id}</td>-->
<!--          <td>${customer.name}</td>-->
<!--          <td>${customer.email}</td>-->
<!--          <td>${customer.location}</td>-->
<!--          <td>${customer.phoneNumber || ''}</td>-->
<!--          <td>-->
<!--            <button onclick="editCustomer(${customer.id})">Edit</button>-->
<!--            <button onclick="deleteCustomer(${customer.id})">Delete</button>-->
<!--          </td>-->
<!--        </tr>`;-->
<!--        tableBody.innerHTML += row;-->
<!--      });-->
<!--    }-->

<!--    async function addCustomer() {-->
<!--      const name = document.getElementById('name').value;-->
<!--      const email = document.getElementById('email').value;-->
<!--      const location = document.getElementById('location').value;-->
<!--      const phoneNumber = document.getElementById('phoneNumber').value;-->

<!--      await fetch('/api/customers', {-->
<!--        method: 'POST',-->
<!--        headers: { 'Content-Type': 'application/json' },-->
<!--        body: JSON.stringify({ name, email, location, phoneNumber })-->
<!--      });-->

<!--      clearForm();-->
<!--      fetchCustomers();-->
<!--    }-->

<!--    async function editCustomer(id) {-->
<!--      const response = await fetch(`/api/customers/${id}`);-->
<!--      const customer = await response.json();-->

<!--      document.getElementById('name').value = customer.name;-->
<!--      document.getElementById('email').value = customer.email;-->
<!--      document.getElementById('location').value = customer.location;-->
<!--      document.getElementById('phoneNumber').value = customer.phoneNumber || '';-->

<!--      document.getElementById('submitBtn').textContent = 'Update Customer';-->
<!--      document.getElementById('submitBtn').onclick = async () => {-->
<!--        await fetch(`/api/customers/${id}`, {-->
<!--          method: 'PUT',-->
<!--          headers: { 'Content-Type': 'application/json' },-->
<!--          body: JSON.stringify({-->
<!--            name: document.getElementById('name').value,-->
<!--            email: document.getElementById('email').value,-->
<!--            location: document.getElementById('location').value,-->
<!--            phoneNumber: document.getElementById('phoneNumber').value-->
<!--          })-->
<!--        });-->

<!--        clearForm();-->
<!--        document.getElementById('submitBtn').textContent = 'Add Customer';-->
<!--        document.getElementById('submitBtn').onclick = addCustomer;-->
<!--        fetchCustomers();-->
<!--      };-->
<!--    }-->

<!--    async function deleteCustomer(id) {-->
<!--      await fetch(`/api/customers/${id}`, { method: 'DELETE' });-->
<!--      fetchCustomers();-->
<!--    }-->

<!--    function clearForm() {-->
<!--      document.getElementById('name').value = '';-->
<!--      document.getElementById('email').value = '';-->
<!--      document.getElementById('location').value = '';-->
<!--      document.getElementById('phoneNumber').value = '';-->
<!--    }-->

<!--    window.onload = fetchCustomers;-->


<!--    let customerData = []; // store fetched customers-->
<!--let currentSortField = null;-->
<!--let currentSortDirection = 'asc';-->

<!--function sortBy(field) {-->
<!--  if (currentSortField === field) {-->
<!--    currentSortDirection = currentSortDirection === 'asc' ? 'desc' : 'asc';-->
<!--  } else {-->
<!--    currentSortField = field;-->
<!--    currentSortDirection = 'asc';-->
<!--  }-->

<!--  customerData.sort((a, b) => {-->
<!--    const valA = a[field].toLowerCase();-->
<!--    const valB = b[field].toLowerCase();-->
<!--    if (valA < valB) return currentSortDirection === 'asc' ? -1 : 1;-->
<!--    if (valA > valB) return currentSortDirection === 'asc' ? 1 : -1;-->
<!--    return 0;-->
<!--  });-->

<!--  renderTable(customerData);-->
<!--}-->

<!--  </script>-->
<!--</head>-->
<!--<body>-->
<!--<h1>Customer Management</h1>-->
<!--<input type="text" id="name" placeholder="Name" />-->
<!--<input type="email" id="email" placeholder="Email" />-->
<!--<input type="text" id="location" placeholder="Location" />-->
<!--<input type="text" id="phoneNumber" placeholder="Phone Number" />-->
<!--<button id="submitBtn" onclick="addCustomer()">Add Customer</button>-->

<!--<table border="1">-->
<!--  <thead>-->
<!--  <tr>-->
<!--    <th>ID</th>-->
<!--    <th>Name</th>-->
<!--    <th>Email</th>-->
<!--    <th>Location</th>-->
<!--    <th>Phone Number</th>-->
<!--    <th>Actions</th>-->
<!--    <th>ID</th>-->
<!--    <th onclick="sortBy('name')">Name ⬍</th>-->
<!--    <th onclick="sortBy('email')">Email ⬍</th>-->
<!--    <th>Actions</th>-->
<!--  </tr>-->
<!--  </thead>-->
<!--  <tbody id="customerTableBody"></tbody>-->
<!--</table>-->

<!--</body>-->
<!--</html>-->


<!--&lt;!&ndash;  </thead>&ndash;&gt;-->
<!--&lt;!&ndash;  <tbody id="customerTableBody"></tbody>&ndash;&gt;-->
<!--&lt;!&ndash;</table>&ndash;&gt;-->
<!--&lt;!&ndash;</body>&ndash;&gt;-->
<!--&lt;!&ndash;</html>&ndash;&gt;-->


<!DOCTYPE html>
<html>
<head>
  <title>Customer CRUD</title>
  <script>
    let customerData = [];
    let currentSortField = null;
    let currentSortDirection = 'asc';

    async function fetchCustomers() {
      const response = await fetch('/api/customers');
      customerData = await response.json();
      renderTable(customerData);
    }

    function renderTable(customers) {
      const tableBody = document.getElementById('customerTableBody');
      tableBody.innerHTML = '';
      customers.forEach(customer => {
        const row = `<tr>
          <td>${customer.id}</td>
          <td>${customer.name}</td>
          <td>${customer.email}</td>
          <td>${customer.phoneNumber}</td>
          <td>${customer.location}</td>
          <td>
            <button onclick="editCustomer(${customer.id})">Edit</button>
            <button onclick="deleteCustomer(${customer.id})">Delete</button>
          </td>
        </tr>`;
        tableBody.innerHTML += row;
      });
    }

    function sortBy(field) {
      if (currentSortField === field) {
        currentSortDirection = currentSortDirection === 'asc' ? 'desc' : 'asc';
      } else {
        currentSortField = field;
        currentSortDirection = 'asc';
      }

      customerData.sort((a, b) => {
        const valA = a[field] ? a[field].toLowerCase() : '';
        const valB = b[field] ? b[field].toLowerCase() : '';
        if (valA < valB) return currentSortDirection === 'asc' ? -1 : 1;
        if (valA > valB) return currentSortDirection === 'asc' ? 1 : -1;
        return 0;
      });

      renderTable(customerData);
    }

    async function addCustomer() {
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const phoneNumber = document.getElementById('phoneNumber').value;
      const location = document.getElementById('location').value;

      await fetch('/api/customers', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, email, phoneNumber, location })
      });

      document.getElementById('name').value = '';
      document.getElementById('email').value = '';
      document.getElementById('phoneNumber').value = '';
      document.getElementById('location').value = '';
      fetchCustomers();
    }

    async function editCustomer(id) {
      const response = await fetch(`/api/customers/${id}`);
      const customer = await response.json();

      document.getElementById('name').value = customer.name;
      document.getElementById('email').value = customer.email;
      document.getElementById('phoneNumber').value = customer.phoneNumber;
      document.getElementById('location').value = customer.location;

      document.getElementById('submitBtn').onclick = async () => {
        await fetch(`/api/customers/${id}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            phoneNumber: document.getElementById('phoneNumber').value,
            location: document.getElementById('location').value
          })
        });
        document.getElementById('name').value = '';
        document.getElementById('email').value = '';
        document.getElementById('phoneNumber').value = '';
        document.getElementById('location').value = '';
        document.getElementById('submitBtn').onclick = addCustomer;
        fetchCustomers();
      };
    }

    async function deleteCustomer(id) {
      await fetch(`/api/customers/${id}`, { method: 'DELETE' });
      fetchCustomers();
    }

    window.onload = fetchCustomers;
  </script>
</head>
<body>
<h1>Customer Management</h1>
<input type="text" id="name" placeholder="Name" />
<input type="email" id="email" placeholder="Email" />
<input type="text" id="phoneNumber" placeholder="Phone Number" />
<input type="text" id="location" placeholder="Location" />
<button id="submitBtn" onclick="addCustomer()">Add Customer</button>

<table border="1">
  <thead>
  <tr>
    <th>ID</th>
    <th onclick="sortBy('name')" style="cursor:pointer">Name ⬍</th>
    <th onclick="sortBy('email')" style="cursor:pointer">Email ⬍</th>
    <th onclick="sortBy('phoneNumber')" style="cursor:pointer">Phone Number ⬍</th>
    <th onclick="sortBy('location')" style="cursor:pointer">Location ⬍</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody id="customerTableBody"></tbody>
</table>
</body>
</html>


